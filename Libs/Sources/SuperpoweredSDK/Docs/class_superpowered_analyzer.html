<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Superpowered SDKs: SuperpoweredAnalyzer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Superpowered SDKs
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
   <div id="projectbrief">Pain-free Audio, Cryptographics and Networking Development for Android, iOS, macOS, tvOS, Linux and Windows</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_superpowered_analyzer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SuperpoweredAnalyzer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Performs bpm and key detection, loudness/peak analysis. Provides compact waveform data (150 points/sec and 1 point/sec resolution), beatgrid information.  
</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7f7a4ac0abb7a4f56e12cd5bd26aca2d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_superpowered_analyzer.html#a7f7a4ac0abb7a4f56e12cd5bd26aca2d">SuperpoweredAnalyzer</a> (unsigned int samplerate, float bpm=0, int lengthSeconds=0, float minimumBpm=60.0f, float maximumBpm=200.0f)</td></tr>
<tr class="separator:a7f7a4ac0abb7a4f56e12cd5bd26aca2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a452e33504067faf8fbd848c7f34525d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_superpowered_analyzer.html#a452e33504067faf8fbd848c7f34525d6">process</a> (float *input, unsigned int numberOfFrames, int lengthSeconds=-1)</td></tr>
<tr class="memdesc:a452e33504067faf8fbd848c7f34525d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes a chunk of audio. This method can be used in a real-time audio thread if lengthSeconds is -1.  <a href="#a452e33504067faf8fbd848c7f34525d6">More...</a><br /></td></tr>
<tr class="separator:a452e33504067faf8fbd848c7f34525d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f239f580ec95bf8016bcfb4ae038342"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_superpowered_analyzer.html#a3f239f580ec95bf8016bcfb4ae038342">getresults</a> (unsigned char **averageWaveform, unsigned char **peakWaveform, unsigned char **lowWaveform, unsigned char **midWaveform, unsigned char **highWaveform, unsigned char **notes, int *waveformSize, char **overviewWaveform, int *overviewSize, float *averageDecibel, float *loudpartsAverageDecibel, float *peakDecibel, float *bpm, float *beatgridStartMs, int *keyIndex, float previousBpm=0.0f)</td></tr>
<tr class="memdesc:a3f239f580ec95bf8016bcfb4ae038342"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get results. Call this method ONCE, after all samples are processed. Delete the analyzer after this, the same instance can not be used further. This method should NOT be used in a real-time audio thread.  <a href="#a3f239f580ec95bf8016bcfb4ae038342">More...</a><br /></td></tr>
<tr class="separator:a3f239f580ec95bf8016bcfb4ae038342"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7f7a4ac0abb7a4f56e12cd5bd26aca2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f7a4ac0abb7a4f56e12cd5bd26aca2d">&#9670;&nbsp;</a></span>SuperpoweredAnalyzer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SuperpoweredAnalyzer::SuperpoweredAnalyzer </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>samplerate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>bpm</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lengthSeconds</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>minimumBpm</em> = <code>60.0f</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>maximumBpm</em> = <code>200.0f</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">samplerate</td><td>The sample rate of the source. </td></tr>
    <tr><td class="paramname">bpm</td><td>If you know the accurate bpm value in advance, set it here. 0 means the analyzer will detect bpm. </td></tr>
    <tr><td class="paramname">lengthSeconds</td><td>The source's length in seconds. </td></tr>
    <tr><td class="paramname">minimumBpm</td><td>Detected bpm will be more than or equal to this. </td></tr>
    <tr><td class="paramname">maximumBpm</td><td>Detected bpm will be less than or equal to this. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a452e33504067faf8fbd848c7f34525d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a452e33504067faf8fbd848c7f34525d6">&#9670;&nbsp;</a></span>process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SuperpoweredAnalyzer::process </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>numberOfFrames</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lengthSeconds</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>32-bit interleaved stereo floating-point input. </td></tr>
    <tr><td class="paramname">numberOfFrames</td><td>How many frames to process. </td></tr>
    <tr><td class="paramname">lengthSeconds</td><td>If the source's length may change, set this to it's current value, leave it at -1 otherwise. If this value is not -1, this method can NOT be used in a real-time audio thread. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3f239f580ec95bf8016bcfb4ae038342"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f239f580ec95bf8016bcfb4ae038342">&#9670;&nbsp;</a></span>getresults()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SuperpoweredAnalyzer::getresults </td>
          <td>(</td>
          <td class="paramtype">unsigned char **&#160;</td>
          <td class="paramname"><em>averageWaveform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char **&#160;</td>
          <td class="paramname"><em>peakWaveform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char **&#160;</td>
          <td class="paramname"><em>lowWaveform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char **&#160;</td>
          <td class="paramname"><em>midWaveform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char **&#160;</td>
          <td class="paramname"><em>highWaveform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char **&#160;</td>
          <td class="paramname"><em>notes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>waveformSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>overviewWaveform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>overviewSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>averageDecibel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>loudpartsAverageDecibel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>peakDecibel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>bpm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>beatgridStartMs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>keyIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>previousBpm</em> = <code>0.0f</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">averageWaveform</td><td>150 points/sec waveform data displaying the average volume. Each sample is an unsigned char from 0 to 255. You take ownership on this (must free memory, _aligned_free() on Windows). </td></tr>
    <tr><td class="paramname">peakWaveform</td><td>150 points/sec waveform data displaying the peak volume. Each sample is an unsigned char from 0 to 255. You take ownership on this (must free memory, _aligned_free() on Windows). </td></tr>
    <tr><td class="paramname">lowWaveform</td><td>150 points/sec waveform data displaying the low frequencies (below 200 Hz). Each sample is an unsigned char from 0 to 255. You take ownership on this (must free memory, _aligned_free() on Windows). </td></tr>
    <tr><td class="paramname">midWaveform</td><td>150 points/sec waveform data displaying the mid frequencies (200-1600 Hz). Each sample is an unsigned char from 0 to 255. You take ownership on this (must free memory, _aligned_free() on Windows). </td></tr>
    <tr><td class="paramname">highWaveform</td><td>150 points/sec waveform data displaying the high frequencies (above 1600 Hz). Each sample is an unsigned char from 0 to 255. You take ownership on this (must free memory, _aligned_free() on Windows). </td></tr>
    <tr><td class="paramname">notes</td><td>150 points/sec data displaying the bass and mid keys. Upper 4 bits are the bass notes 0 to 11, lower 4 bits are the mid notes 0 to 11 (C, C#, D, D#, E, F, F#, G, G#, A, A#, B). The note value is 12 means "unknown note due low volume". You take ownership on this (must free memory, _aligned_free() on Windows). </td></tr>
    <tr><td class="paramname">waveformSize</td><td>The number of points in averageWaveform, peakWaveform or lowMidHighWaveform. </td></tr>
    <tr><td class="paramname">overviewWaveform</td><td>1 point/sec waveform data displaying the average volume in decibels. Useful for displaying the overall structure of a track. Each sample is a signed char, from -128 to 0 decibel. You take ownership on this (must free memory, _aligned_free() on Windows). </td></tr>
    <tr><td class="paramname">overviewSize</td><td>The number points in overviewWaveform. </td></tr>
    <tr><td class="paramname">averageDecibel</td><td>The average loudness of all samples processed in decibel. </td></tr>
    <tr><td class="paramname">loudpartsAverageDecibel</td><td>The average loudness of the "loud" parts in the music in decibel. (Breakdowns and other quiet parts are excluded.) </td></tr>
    <tr><td class="paramname">peakDecibel</td><td>The loudest sample in decibel. </td></tr>
    <tr><td class="paramname">bpm</td><td>Beats per minute. </td></tr>
    <tr><td class="paramname">beatgridStartMs</td><td>The position where the beatgrid starts. Important! On input set it to 0, or the ms position of the first audio sample. </td></tr>
    <tr><td class="paramname">keyIndex</td><td>The dominant key (chord) of the music. 0..11 are major keys from A to G#, 12..23 are minor keys from A to G#. Check the static constants in this header for musical, Camelot and Open Key notations. </td></tr>
    <tr><td class="paramname">previousBpm</td><td>If the analyzer is used in a "live" situation (measuring periodically), submit the previously measured bpm here. 0.0f means no previously measured bpm. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
